<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Draggable Rectangles</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@200..800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf_viewer.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="left-panel" class="left-panel">
        <div class="panel-header">
            <h3>Documents</h3>
        </div>
        <div class="panel-content">
            <div id="document-list" class="document-list">
                <!-- Documents will be loaded from JSON -->
            </div>
        </div>
    </div>
    <div id="action-tiles-container" class="action-tiles-container">
        <!-- Action tiles will appear here while dragging -->
    </div>
    <div id="folder-indicator" class="folder-indicator">
        <span class="material-icons">folder</span>
    </div>
    <div id="canvas" class="canvas">
        <!-- Rectangles will be loaded from JSON -->
    </div>
    <div id="share-dialog" class="share-dialog">
        <div class="dialog-content">
            <div class="dialog-header">
                <h3 id="dialog-title">Share Document</h3>
                <button class="dialog-close" id="dialog-close">Ã—</button>
            </div>
            <div class="dialog-body">
                <p id="dialog-message">Document shared successfully!</p>
            </div>
            <div class="dialog-footer">
                <button class="dialog-button dialog-button-secondary" id="dialog-cancel">Cancel</button>
                <button class="dialog-button" id="dialog-share">Share</button>
                <button class="dialog-button dialog-button-primary" id="dialog-share-close">Share and Close</button>
            </div>
        </div>
    </div>

    <div id="pdf-viewer-overlay" class="pdf-viewer-overlay">
        <div class="pdf-viewer-container">
            <div class="pdf-viewer-toolbar">
                <div class="pdf-viewer-toolbar-left">
                    <button class="pdf-viewer-button" id="pdf-viewer-close" title="Close">
                        <span class="material-icons">close</span>
                    </button>
                    <div class="pdf-viewer-title" id="pdf-viewer-title"></div>
                </div>
                <div class="pdf-viewer-toolbar-center">
                    <button class="pdf-viewer-button" id="pdf-viewer-zoom-out" title="Zoom Out">
                        <span class="material-icons">zoom_out</span>
                    </button>
                    <span class="pdf-viewer-zoom-level" id="pdf-viewer-zoom-level">100%</span>
                    <button class="pdf-viewer-button" id="pdf-viewer-zoom-in" title="Zoom In">
                        <span class="material-icons">zoom_in</span>
                    </button>
                </div>
                <div class="pdf-viewer-toolbar-right">
                    <button class="pdf-viewer-button" id="pdf-viewer-fit-width" title="Fit to Width">
                        <span class="material-icons">fit_screen</span>
                    </button>
                </div>
            </div>
            <div class="pdf-viewer-pages-container" id="pdf-viewer-pages-container">
                <div class="pdf-viewer-pages" id="pdf-viewer-pages">
                    <!-- Pages will be inserted here -->
                </div>
            </div>
        </div>
    </div>

    <div id="ai-input-overlay" class="ai-input-overlay">
        <div class="ai-container">
            <div class="ai-chips-container" id="ai-chips-container">
                <!-- Document chips will be inserted here -->
            </div>
            <div class="ai-chat-container" id="ai-chat-container">
                <!-- Chat messages will be inserted here -->
            </div>
            <div class="ai-input-container">
                <input type="text" id="ai-input" class="ai-input" placeholder="Ask anything..." autocomplete="off" />
            </div>
        </div>
    </div>

    <div id="settings-overlay" class="settings-overlay">
        <div class="settings-container">
            <div class="settings-header">
                <h3>Settings</h3>
                <button class="settings-close" id="settings-close" title="Close">
                    <span class="material-icons">close</span>
                </button>
            </div>
            <div class="settings-body">
                <div class="settings-section">
                    <label for="gemini-api-key" class="settings-label">Google Gemini API Key</label>
                    <input 
                        type="password" 
                        id="gemini-api-key" 
                        class="settings-input" 
                        placeholder="Enter your Gemini API key"
                        autocomplete="off"
                    />
                    <p class="settings-hint">
                        Your API key is stored locally in your browser. Get your key from 
                        <a href="https://makersuite.google.com/app/apikey" target="_blank" rel="noopener noreferrer">Google AI Studio</a>.
                    </p>
                </div>
            </div>
            <div class="settings-footer">
                <button class="settings-button settings-button-secondary" id="settings-cancel">Cancel</button>
                <button class="settings-button settings-button-primary" id="settings-save">Save</button>
            </div>
            <div id="settings-saved-message" class="settings-saved-message">
                <span class="material-icons">check_circle</span>
                <span>Settings saved!</span>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/interactjs/dist/interact.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf_viewer.min.js"></script>
    <script type="module" src="/script.js"></script>
</body>
</html>
